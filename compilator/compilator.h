#ifndef __COMPILATOR_H__
#define __COMPILATOR_H__

#define OP_S 0b0000001 // set operand to 16/32 bit mod
#define OP_D 0b0000010 // 0 = adding from reg to mem, 1 = adding from memory to reg 

#define REG_MOD_Register_indirect               0b00000000
#define REG_MOD_one_byte_signed_displacement    0b01000000
#define REG_MOD_four_byte_signed_displacement   0b10000000
#define REG_MOD_register_displacement           0b11000000

#define CHAR_TO_LEFT_REGISTER(r) ((r) << 3)
#define CHAR_TO_RIGHT_REGISTER(r) ((r) << 0)

#define ADDRESS_TO_8CHARS(addr) (unsigned char)((addr) >> (8*0)), (unsigned char)((addr) >> (8*1)), (unsigned char)((addr) >> (8*2)), (unsigned char)((addr) >> (8*3)), (unsigned char)((addr) >> (8*4)), (unsigned char)((addr) >> (8*5)), (unsigned char)((addr) >> (8*6)), (unsigned char)((addr) >> (8*7))
#define ADDRESS_TO_4CHARS(addr) (unsigned char)((addr) >> (8*0)), (unsigned char)((addr) >> (8*1)), (unsigned char)((addr) >> (8*2)), (unsigned char)((addr) >> (8*3))
#define ADDRESS_TO_2CHARS(addr) (unsigned char)((addr) >> (8*0)), (unsigned char)((addr) >> (8*1))
#define ADDRESS_TO_1CHARS(addr) (unsigned char)((addr) >> (8*0))

#define RELATIVE_CALL_TO_8CHARS(addr, destAdrr, opcodesize) ADDRESS_TO_8CHARS(-(long int)(addr)-(long int)(opcodesize)+(long int)(destAdrr))
#define RELATIVE_CALL_TO_4CHARS(addr, destAdrr, opcodesize) ADDRESS_TO_4CHARS(-(long int)(addr)-(long int)(opcodesize)+(long int)(destAdrr))
#define RELATIVE_CALL_TO_2CHARS(addr, destAdrr, opcodesize) ADDRESS_TO_2CHARS(-(long int)(addr)-(long int)(opcodesize)+(long int)(destAdrr))
#define RELATIVE_CALL_TO_1CHARS(addr, destAdrr, opcodesize) ADDRESS_TO_1CHARS(-(long int)(addr)-(long int)(opcodesize)+(long int)(destAdrr))

#define GOODENOUGH1  "%s%3i Warning?                                            \n\
                                          C'est pas si mal!                                         \n\n"


#define GOODENOUGH2 "\n\
                                     #@@&&&@/                                                       \n\
                                   @@@@%%%/*   ,                                                    \n\
                                 @@@@@&%(,       .@                                      .   .*#(   \n\
                                @@@@@%/.       .#*(((                                  ,  .. *#     \n\
                                 @@@%/*/,*..**,,(&*,  &                                 .  *%       \n\
                                 @@@@&#//@**%(,(.  . . ,                           .    *((         \n\
                                  @@@@@**/(#*,*,/,,,/%/*% *@                         .,//           \n\
                                    @@@@/***,,..**(&***/@@@@@@@@@                  //(((/           \n\
                                     @%&@@/****,,%#/(#(&@@@@@@@@@@@  . .,*         , #(@.           \n\
                                      %@&,%@@#(((#@@@@@@.  (@@@@@@@@@   *  .       ,,/ (.,          \n\
                                    @@@@@#*  .((%&@&&%/&(,    /@@@@@@@,   .*  &   * (*,*  .         \n\
                                  @@@@@@@@ , *  .  &@&%%& ..    ,@@@@@@.,  (.,*  *//#**#@,          \n\
                                 .@@@@@@@@@ ,/ &.    .#@&@%        %@@@@   ,,/., .*(,//&/           \n\
       %                       .  ,@@@@@@@@ . ,    *. .*@&@%         @@@%...,.**/ (**%*             \n\
      *%&&%%#((***                 @@@@@@@@  . ,  .   ../@%@%@   .  . &@@&##.,,(#*(#                \n\
         @%%###(#%(/*,%  ,*.*..,. #@@@@@@@@,  .  . . , ..(#%&%@       ./@                           \n\
             &#(#(/(/****/,.,/,*.  @@@@@@@@ ,  . , ,  .  ,@%@%#(/,      ,@                          \n\
                 #&&&&&#(#.,/(%./.#@@@@@@@@*      .  . , .#@#@#@##, ..  ./@#                        \n\
                 @@&%%%##@(&    . ,@@@@@@@@     .     , . (@@#@#@#( .  . .%@@                       \n\
                  .&@%((, & .  * * @@@@@@@@    * ,         &#@(%(##  .,. . *@@                      \n\
                   ,.  , ,*.    ,. @@@@@@@@       .  ,     ,%(###((#. .  ., .@@                     \n\
                 . ...    (/,  /.(.@@@@@@@@*  , ,    .  . ,/#@##((&#&  ,   . @@                     \n\
               /..&,.,(#.& /**( ,./@@@@@@@@.*  , *  . . ..,/@((#(##@#&  .,.   @                     \n\
                                                                                                    \n\
                                            "

//72

#define GOODOSS  ("\n\
                                       ////****///////////////*///                                  \n\
                                  /////////////////////////////////////                             \n\
                              //////////////////*///////////////*//////////.                        \n\
                          ./////*///////////////////////////////*////////////**                     \n\
                       .*///////*//////*#&&@@@@&&%//////////////*///////*////////.                  \n\
                     *//////////*//////*****/((&@@&(///////////////////////////////*                \n\
                   .////////////*///////,**/(%(#@@@(/////////////////////////////////*              \n\
                  //////////////////////,*((*///&(%///////////////////////////////////*             \n\
                ////////////////////*///**##///((//#&@&&&&&&&@//////////////////////////*           \n\
               /////////////////*////////*//((((((/.%@@@&&&&&&&&//////////////////////////          \n\
              //////////////////*//////////* .//#%,.,*&&&&&&&&&&%#*/////////////*//////////         \n\
             *//////////////////*////////####. .###.,..,%&%%&&&%&%%%(*//////////////////////        \n\
             ///////////////////*/////((##%##% ..(%(.....*%%%#&&&&&&%%%/////////////////////,       \n\
            ,/////////////////////*/((###%%####./#%%,,....,#%%%&&%%&@@@&#///////////////////,       \n\
            *///*//////////////////(#####%&%%%#%*#%&/,.....*%%%%%&&%@@@@&%///////////////////       \n\
            ///////////////////////(((%##%&%%%##&%%%(,,.....%&@%&&%&&#@@&%%(/////////////////       \n\
            */*/////////////////*///###%%#%&%@%#&&%&(,,,.....%%&@@&&&&/&@%#((/*/////////*////       \n\
            ///////////////////////*(##(%@#&@&@%&@&&/,,,/....,/%@@@@@&@/(///*#///////////////       \n\
            ////*///////////////////(##%#@@%&@@&&@&&(,,,*......*&@@@@@&//(((////*////////////       \n\
             //////////////////##////&%%&&&&%@@%&@&&%/*****...#@@@@@@@@@@@%&#///////////////,       \n\
             **//////////////////@&@((##%&@@@@@&@@%%&*,,,(#&@@@@@&@@@@@@@@&%&%//////////*///        \n\
              //////////////////,,(###&&&&@@@@&@@@@@@@@@@@@&@@@@@&&@@@@@@@@%%%%////////////         \n\
               /////////////////**/(((#&&&@@@@@@@@@@@@@@@@@@&&&@&&&&@@@@@@@@&%%#//////////          \n\
                //////////////////////%%%/#%@&@@@@@@@@@@&@&&&&&&&&&&&&/((((#((/*/////////           \n\
                  //////*///*////////&&///#%&@@@@@@@@@@&&&&@@@&&&&&&&&&/////////*//////             \n\
                   *////////////*/////////#&@@@@@@&@@@&%*(@@@@&&&&&%%%&%//////////////              \n\
                     ////////////////////#&@@@@@@@&&&#//////&&@@&&&&&&&&%///////////                \n\
                       .////////*////////%@@@@&&@@&&////////*/&&@&&&&&&&&%///////*                  \n\
                          */////*///////%@%%&&&@@&#/////////////%&&&&&&&&&(///*                     \n\
                             *//////////#%%%&&@&&(///////////////#%&%&&&&&&#(                       \n\
  /#########(    _=====_         ,/////%%%%&&&&&//*////////////////%%%%%&&&&%(                      \n\
      .##########################((.((##%&&&&&#/////////////////////(%%%%&&&&%/                     \n\
       (###############################%%&&&&/(///////////(////////////#&&&&&&(                     \n\
        #############################%##&&&####((////////////////(///(((%&%&&&%*                    \n\
            (##########################%&&###########((///////((/////(//(%%&&&%/                    \n\
           /##########################%&&######(((//(///////(/(/*        /&&&&%/                    \n\
                      *##########/###%&&##############(((/.         .._-#,%%&%#/#\\,,                \n\
                        *########/##%&&%///////****/(###*,,,.     **,.     #&&#|    |\\              \n\
                        .#######((#%%&&.            .#&#%%*,,*\\,,,     _-  *%%%/      ,/            \n\
                ___ _ ,///(#####&%#%%&#   #(//((//*,... ..,*#&&@@@@&&&&%/   %%@@.     ./            \n\
           ,//,              ,,#@@@@.\\                          ..,*,\\=-_   %@@#%*-,&(//=-/'*\\      \n\
        ,*         /%&&%*    ,#*#@&/  ,.    _--=##%&&&&#         &%(*,..,/(#&#@%#%            *     \n\
       /         .(///((//(@  *%%%(    .////     ..           .%((((//,.  .&.  .    .-=&       *    \n\
      /*          .(((////(//&         /               _\\*%&#/////.          .%(/#*/   /,      ()   \n\
       #/            *//((//(/         */,((##%%%%#((./       *//               .(      #     -//   \n\
        *%%                         ,%(          /*             .&.,%((%(        \\,(    # _-//      \n\
           /(&&(.             ,%&%(/            (%     #,          ,(    (&,     //     \\#/         \n\
                 ...(((((.../                     (&&#. *#%           /    ((&._#/                  \n\
                                                          ,(&*          ./                          \n\
                                                             *#% *%&%(/*                            \n\
                                                                                                    \n\
                                              0 Warning                                             \n\
                                    MEILLEUR PROGRAMMEUR FRANCAI                                    \n\
                                                                                                    \n\
")


typedef struct OpCode {
    int adrr;
    int c_size;
    char c[0];
} OpCode_t;


#endif